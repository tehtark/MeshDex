@page "/"
@using MeshDex.Application.Services
@using Microsoft.AspNetCore.Authorization
@inject NavigationManager NavigationManager
@inject LibraryConfigurationService LibraryConfigurationService
@attribute [Authorize]
@inherits CancellableComponentBase

<PageTitle>3Dictionary</PageTitle>

@code{
    protected override async Task OnInitializedAsync()
    {
        var ct = NewCts();
        var libraryConfiguration = await LibraryConfigurationService.GetConfigurationAsync(ct);

        switch (libraryConfiguration)
        {
            case { Initialised: false }:
                NavigationManager.NavigateTo("/setup");
                return;
            case { Initialised: true }:
                NavigationManager.NavigateTo("/browser");
                return;
        }
    }
}