@page "/settings/configuration"
@using MeshDex.Application.Services
@using MeshDex.Domain.Entities
@inject LibraryConfigurationService LibraryConfigurationService
@inherits CancellableComponentBase

@if (!_loaded || _libraryConfiguration is null)
{
    <Loading/>
}
else
{
    // form to show where the library "Assets" folder is located.
    <MudStack Justify="Justify.Center" AlignItems="AlignItems.Center" Class="h-100">
        <MudTextField @bind-Value="_libraryConfiguration.RootDirectory" Label="Default Dictionary Path"
                      Variant="Variant.Outlined"
                      FullWidth Required/>
        <MudButton OnClick="@(() => SaveSettings())" Color="Color.Primary" Variant="Variant.Filled" FullWidth>Save
            Settings
        </MudButton>
    </MudStack>
}

@code{

    private bool _loaded;
    private LibraryConfiguration? _libraryConfiguration;

    protected override async Task OnInitializedAsync()
    {
        var ct = NewCts();
        _libraryConfiguration = await LibraryConfigurationService.GetConfigurationAsync(ct);

        _loaded = true;
    }

    private void SaveSettings()
    {
    }

}