@page "/"
@using Microsoft.AspNetCore.Authorization
@using ThreeDictionary.Application.Services
@inject NavigationManager NavigationManager
@inject LibraryConfigurationService LibraryConfigurationService
@attribute [Authorize]

<PageTitle>3Dictionary</PageTitle>

@* @if (!_loaded) *@
@* { *@
@*     <Loading/> *@
@* } *@
@* else *@
@* { *@
@*     <ModelBrowser/>  *@
@* } *@

@code{

    // private bool _loaded;

    protected override async Task OnInitializedAsync()
    {
        var libraryConfiguration = await LibraryConfigurationService.GetConfigurationAsync();

        switch (libraryConfiguration)
        {
            case { Initialised: false }:
                NavigationManager.NavigateTo("/setup");
                return;
            case { Initialised: true }:
                NavigationManager.NavigateTo("/browser");
                return;
        }
    }

}