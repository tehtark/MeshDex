@page "/"
@using Microsoft.AspNetCore.Authorization
@using ThreeDictionary.Application.Services
@using ThreeDictionary.Components.Browser
@inject NavigationManager NavigationManager
@inject LibraryConfigurationService LibraryConfigurationService
@attribute [Authorize]

<PageTitle>3Dictionary</PageTitle>

@if (!_loaded)
{
    <Loading/>
}
else
{
    <FileBrowser/>
}

@code{

    private bool _loaded;

    protected override async Task OnInitializedAsync()
    {
        var libraryConfiguration = await LibraryConfigurationService.GetConfigurationAsync();

        if (libraryConfiguration is { Initialised: false })
        {
            NavigationManager.NavigateTo("/setup");
        }

        _loaded = true;
    }

}