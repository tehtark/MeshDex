@page "/settings/configuration"
@layout SettingsLayout
@using Microsoft.AspNetCore.Authorization
@using ThreeDictionary.Application.Services
@using ThreeDictionary.Components.Settings.Shared
@using ThreeDictionary.Domain.Entities
@inject LibraryConfigurationService LibraryConfigurationService
@attribute [Authorize]

@if (!_loaded || _libraryConfiguration is null)
{
    <Loading/>
}
else
{
    // form to show where the library "Assets" folder is located.
    <MudStack Justify="Justify.Center" AlignItems="AlignItems.Center" Class="h-100">
        <MudText Typo="Typo.h5">Settings</MudText>
        <MudTextField @bind-Value="_libraryConfiguration.RootDirectory" Label="Default Dictionary Path" Variant="Variant.Outlined"
                      FullWidth Required/>
        <MudButton OnClick="@(() => SaveSettings())" Color="Color.Primary" Variant="Variant.Filled" FullWidth>Save
            Settings
        </MudButton>
    </MudStack>
}

@code{

    private bool _loaded;
    private LibraryConfiguration? _libraryConfiguration;

    protected override async Task OnInitializedAsync()
    {
        _libraryConfiguration = await LibraryConfigurationService.GetConfigurationAsync();
        await Task.Delay(Globals.DefaultDelay);

        _loaded = true;
    }

    private void SaveSettings()
    {
    }

}